三个和渲染流程有关的概念：重排、重绘、合成，如何减少重排重绘，优化 web 性能？

1. 重排：更新了元素的几何属性；重排需要更新完整的渲染流水线，开销最大
   ![](/Images/更新元素的几何属性-重排.png)
2. 重绘：更新元素的绘制属性；重绘省去了布局和分层阶段，执行效率要比重排高一些
   ![](/Images/更新元素背景-重绘.png)
3. 直接合成阶段：更改一个既不要布局也不要绘制的属性，渲染引擎将跳过布局和绘制，只执行后续的合成操作，大大提升了绘制效率
   ![](/Images/合成-避开重排和重绘.png)

4. 减少重排重绘，相当于少了渲染进程的主线程和非主线程的很多计算和操作，能够加快 web 的展示
   - 触发 repaint reflow 的操作尽量放在一起，比如改变 dom 高度和设置 margin 分开写，可能会导致 2 次重排
   - 通过虚拟 dom 层计算出操作的总的差异，一起提交给浏览器
   - 使用 class 操作样式，而不是频繁的操作 style
   - 避免使用 table 布局
   - 批量 dom 操作，或使用框架如 react
   - Debounce window resize 事件
   - 对 dom 属性的读写要分离
   - will-change: transform 优化
